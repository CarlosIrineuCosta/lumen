# Claude Code Session Management System

## Custom Slash Commands Setup

### /start Command
**Purpose**: Read current day's orchestration file and present action plan

**Implementation**: Add to Claude Code settings
```json
{
  "slash_commands": {
    "/start": {
      "description": "Start session by reading current orchestration file",
      "command": "claude_read_start_file",
      "file_pattern": "start-here-*.md"
    }
  }
}
```

**Behavior**:
1. Look for `start-here-[today's date].md` in root directory
2. If found, read and present contents as action plan using ExitPlanMode
3. If not found, read most recent `start-here-*.md` file
4. Present plan and wait for user approval before proceeding

### /end Command  
**Purpose**: End session with comprehensive review and next-day preparation

**Implementation**: Add to Claude Code settings
```json
{
  "slash_commands": {
    "/end": {
      "description": "End session with review and next-day preparation", 
      "command": "claude_end_session_workflow",
      "review_files": [
        "CURRENT_STATUS.md",
        "CLAUDE.md", 
        "opusdev/README.md",
        "opusdev/ARCHITECTURE.md"
      ]
    }
  }
}
```

**Workflow**:
1. **Review Phase**: Check and summarize changes to determined files
2. **Status Update**: Update CURRENT_STATUS.md if needed
3. **Next Day Prep**: Create next `start-here-[tomorrow].md` based on:
   - Completed tasks from today
   - Remaining items from current orchestration file  
   - Any new priorities discovered
4. **Git Management**: Check git status, offer commit/push with generated message
5. **Cleanup**: Offer to archive/delete today's orchestration file

## Hook Integration (Where Possible)

### User Prompt Submit Hook (Existing)
Can be configured to detect `/start` and `/end` patterns:

```json
{
  "hooks": {
    "user-prompt-submit": {
      "command": "bash -c 'if [[ \"$USER_PROMPT\" == \"/start\"* ]]; then echo \"DETECTED_START_COMMAND\"; elif [[ \"$USER_PROMPT\" == \"/end\"* ]]; then echo \"DETECTED_END_COMMAND\"; fi'"
    }
  }
}
```

### Tool Call Hooks (For Git Operations)
```json
{
  "hooks": {
    "tool-call-bash-git": {
      "command": "echo 'Git operation detected: $TOOL_ARGS'",
      "filter": "git"
    }
  }
}
```

## File Templates

### Start File Template
**File**: `start-here-template.md`
```markdown
# Session Start - [DATE]

## Priority Tasks
- [ ] Task from previous session
- [ ] New priority discovered

## Orchestration Instructions
1. Present this plan using ExitPlanMode before execution
2. Only proceed after explicit user approval  
3. Use TodoWrite to track all multi-step tasks

## Session Context
**Previous Session**: [Summary]
**Current Status**: [From CURRENT_STATUS.md]
**Known Issues**: [Any blockers or concerns]

## Implementation Plan
[Specific actions for today]

---
*Auto-generated by /end command from previous session*
```

### End Session Template
**File**: `end-session-template.md`
```markdown
# Session End Review - [DATE]

## Completed Today
- [X] Task 1
- [X] Task 2

## File Changes Detected
**CURRENT_STATUS.md**: [Changes summary]
**CLAUDE.md**: [Changes summary]  
**opusdev/README.md**: [Changes summary]
**opusdev/ARCHITECTURE.md**: [Changes summary]

## Git Status
[Output of git status]

## Tomorrow's Priorities
1. [Priority 1]
2. [Priority 2]

## Cleanup Actions
- [ ] Archive today's orchestration file
- [ ] Commit and push changes
- [ ] Update status files
```