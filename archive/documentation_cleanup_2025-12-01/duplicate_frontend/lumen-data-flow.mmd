flowchart TD
    subgraph "Client Side"
        USER[User Action]
        UI[React Components]
        STATE[State Management]
        CACHE[Local Cache]
    end
    
    subgraph "Network Layer"
        API_CALL[API Request]
        AUTH_HEADER[JWT Authentication]
        RESPONSE[API Response]
    end
    
    subgraph "Backend Services"
        MIDDLEWARE[Auth Middleware]
        ROUTE[API Route Handler]
        SERVICE[Business Logic]
        VALIDATION[Input Validation]
    end
    
    subgraph "Data Layer"
        DB_QUERY[Database Query]
        FILE_OP[File Operations]
        CACHE_DB[Redis Cache]
    end
    
    subgraph "External Services"
        FIREBASE[Firebase Auth]
        STORAGE[File Storage]
        CDN[Content Delivery]
    end
    
    %% User Interaction Flow
    USER --> UI
    UI --> STATE
    STATE --> API_CALL
    
    %% Network Processing
    API_CALL --> AUTH_HEADER
    AUTH_HEADER --> MIDDLEWARE
    
    %% Backend Processing
    MIDDLEWARE --> FIREBASE
    FIREBASE --> MIDDLEWARE
    MIDDLEWARE --> ROUTE
    ROUTE --> VALIDATION
    VALIDATION --> SERVICE
    
    %% Data Operations
    SERVICE --> DB_QUERY
    SERVICE --> FILE_OP
    SERVICE --> CACHE_DB
    
    %% External Services
    FILE_OP --> STORAGE
    STORAGE --> CDN
    
    %% Response Flow
    DB_QUERY --> SERVICE
    CACHE_DB --> SERVICE
    SERVICE --> ROUTE
    ROUTE --> RESPONSE
    RESPONSE --> STATE
    STATE --> UI
    UI --> CACHE
    
    %% Error Handling
    VALIDATION -->|Invalid Data| RESPONSE
    FIREBASE -->|Auth Failed| RESPONSE
    DB_QUERY -->|Query Error| SERVICE
    
    %% Styling
    classDef client fill:#e1f5fe
    classDef network fill:#fff3e0
    classDef backend fill:#f3e5f5
    classDef data fill:#e8f5e8
    classDef external fill:#ffebee
    
    class USER,UI,STATE,CACHE client
    class API_CALL,AUTH_HEADER,RESPONSE network
    class MIDDLEWARE,ROUTE,SERVICE,VALIDATION backend
    class DB_QUERY,FILE_OP,CACHE_DB data
    class FIREBASE,STORAGE,CDN external