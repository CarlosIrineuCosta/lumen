<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <title>Lumen - Photography Without Compromise</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/app.css">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/icon-32.png">
    <link rel="icon" type="image/png" sizes="192x192" href="assets/icons/icon-192.png">
    <link rel="apple-touch-icon" href="assets/icons/icon-192.png">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    
    <!-- ExifReader for EXIF metadata extraction -->
    <script src="https://cdn.jsdelivr.net/npm/exifreader@4.23.5/dist/lite/exif-reader.js"></script>
</head>
<body>
    <!-- App Shell -->
    <div id="app" class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="brand">
                    <h1 class="logo">LUMEN</h1>
                </div>
                
                <nav class="nav-tabs">
                    <button class="tab-btn active" data-view="home">Home</button>
                    <button class="tab-btn" data-view="discover">Discover</button>
                    <button class="tab-btn" data-view="photographers">Photographers</button>
                    <button class="tab-btn" data-view="nearby">Nearby</button>
                    <button class="tab-btn" data-view="portfolio">Portfolio</button>
                </nav>
                
                <div class="header-actions">
                    <button class="btn-upload" id="uploadBtn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 5v14M5 12h14"/>
                        </svg>
                    </button>
                    <button class="btn-profile" id="profileBtn">
                        <img src="" alt="Profile" class="profile-avatar" id="userAvatar">
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="app-main">
            <!-- Photo Grid -->
            <div id="photoGrid" class="photo-grid">
                <!-- Photos will be dynamically inserted here -->
            </div>
            
            <!-- Loading State -->
            <div class="loading-indicator" id="loadingIndicator">
                <div class="spinner"></div>
            </div>
            
            <!-- Empty State -->
            <div class="empty-state hidden" id="emptyState">
                <h2>No photos yet</h2>
                <p>Be the first to share your work</p>
                <button class="btn-primary">Upload Photo</button>
            </div>
        </main>

        <!-- Photo Viewer Modal -->
        <div class="photo-viewer hidden" id="photoViewer">
            <button class="viewer-close" id="viewerClose">&times;</button>
            <div class="viewer-content">
                <img src="" alt="" class="viewer-image" id="viewerImage">
                <div class="viewer-info">
                    <div class="photographer-info">
                        <img src="" alt="" class="photographer-avatar">
                        <div>
                            <h3 class="photographer-name"></h3>
                            <p class="photographer-location"></p>
                        </div>
                    </div>
                    <div class="photo-details">
                        <p class="photo-title"></p>
                        <p class="photo-camera"></p>
                        <p class="photo-settings"></p>
                    </div>
                </div>
            </div>
        </div>
        <!-- Upload Modal -->
        <div class="upload-modal hidden" id="uploadModal">
            <div class="modal-content">
                <button class="modal-close" id="uploadClose">&times;</button>
                <h2>Share Your Work</h2>
                
                <div class="upload-area" id="uploadArea">
                    <input type="file" id="fileInput" accept="image/*" multiple hidden>
                    <div class="upload-placeholder">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                            <circle cx="8.5" cy="8.5" r="1.5"/>
                            <polyline points="21 15 16 10 5 21"/>
                        </svg>
                        <p>Drop photos here or click to browse</p>
                        <span class="upload-hint">JPEG, PNG up to 20MB</span>
                    </div>
                </div>
                
                <div class="upload-preview hidden" id="uploadPreview">
                    <img src="" alt="Preview" id="previewImage">
                    
                    <!-- Basic Information -->
                    <div class="form-section">
                        <h3>Basic Information</h3>
                        <input type="text" placeholder="Title (optional)" class="input-field" id="photoTitle">
                        <textarea placeholder="Description (optional)" class="input-field" id="photoDescription" rows="3"></textarea>
                    </div>
                    
                    <!-- Portfolio & Settings -->
                    <div class="form-section form-row">
                        <label class="checkbox-label">
                            <input type="checkbox" id="isPortfolio">
                            <span class="checkmark"></span>
                            Portfolio Photo
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="isPublic" checked>
                            <span class="checkmark"></span>
                            Public
                        </label>
                    </div>
                    
                    <!-- People & Credits -->
                    <div class="form-section">
                        <h3>People & Credits</h3>
                        <input type="text" placeholder="Photographer (auto-filled)" class="input-field" id="photographerName" readonly>
                        <input type="text" placeholder="Model name (optional)" class="input-field" id="modelName">
                    </div>
                    
                    <!-- Technical Details (Auto-extracted from EXIF) -->
                    <div class="form-section">
                        <h3>Technical Details</h3>
                        <div class="form-row">
                            <input type="text" placeholder="Camera" class="input-field half-width" id="cameraInfo">
                            <input type="text" placeholder="Lens" class="input-field half-width" id="lensInfo">
                        </div>
                        <div class="form-row">
                            <input type="text" placeholder="ISO" class="input-field quarter-width" id="isoValue">
                            <input type="text" placeholder="Aperture" class="input-field quarter-width" id="apertureValue">
                            <input type="text" placeholder="Shutter Speed" class="input-field quarter-width" id="shutterSpeed">
                            <input type="text" placeholder="Focal Length" class="input-field quarter-width" id="focalLength">
                        </div>
                    </div>
                    
                    <!-- Location -->
                    <div class="form-section">
                        <h3>Location</h3>
                        <input type="text" placeholder="Location (auto-extracted or manual)" class="input-field" id="locationInfo">
                    </div>
                    
                    <button class="btn-primary" id="submitUpload">Upload Photo</button>
                </div>
            </div>
        </div>
        <!-- Auth Modal (if not logged in) -->
        <div class="auth-modal hidden" id="authModal">
            <div class="modal-content auth-content">
                <div class="auth-header">
                    <h1 class="auth-logo">LUMEN</h1>
                    <p class="auth-tagline">Photography Without Compromise</p>
                </div>
                
                <div class="auth-body">
                    <h2>Join the Community</h2>
                    <p>A professional photography platform with no ads, no algorithms, just pure photography.</p>
                    
                    <button class="btn-google" id="googleSignIn">
                        <svg width="20" height="20" viewBox="0 0 24 24">
                            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                        </svg>
                        Continue with Google
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Install PWA Prompt -->
    <div class="install-prompt hidden" id="installPrompt">
        <p>Install Lumen for the best experience</p>
        <button class="btn-install" id="installBtn">Install</button>
        <button class="btn-dismiss" id="dismissBtn">Not now</button>
    </div>

    <!-- Scripts -->
    <script src="js/app.js" type="module"></script>
</body>
</html>